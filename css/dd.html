<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        div {
            width: 200px;
            height: 200px;
            border: 2px solid blue;
            background: gray;
        }
        body {
            margin: 0;
        }
    </style>
</head>
<body>
<div></div>
<script>
    var domDiv = document.getElementsByTagName("div")[0];
    var maximized = false;
    var originSize = {};
    var dd;

    originSize.w = parseFloat(getComputedStyle(domDiv, null).width);
    originSize.h = parseFloat(getComputedStyle(domDiv, null).height);
    domDiv.addEventListener("click", function() {
        if (!maximized) {
            fullfill();
            maximized = true;
            console.log("maximized true, adding event listener");
            window.addEventListener("resize", fullfill,true);
            dd = fullfill;
        } else {
            this.style.width = originSize.w + "px";
            this.style.height = originSize.h + "px";
            console.log("maximized false, removing event listener");

            console.log(dd === fullfill);
            window.removeEventListener("resize", fullfill,true);
            maximized = false;

        }

        function fullfill() {
            var screensize = getViewportSize();
            console.log(screensize.w + " " + screensize.h);
            var divBorder = {
                top: parseFloat(getComputedStyle(domDiv, null).borderTopWidth),
                bottom: parseFloat(getComputedStyle(domDiv, null).borderBottomWidth),
                left: parseFloat(getComputedStyle(domDiv, null).borderLeftWidth),
                right: parseFloat(getComputedStyle(domDiv, null).borderRightWidth)
            };

            domDiv.style.width = screensize.w - divBorder.left - divBorder.right + "px";
            domDiv.style.height = screensize.h - divBorder.top - divBorder.bottom + "px";
        }

    });

    function getViewportSize(w) {
        w = w || window;

        if (w.innerWidth != null) return {w: w.innerWidth, h: w.innerHeight};
        var d = w.document;
        if (document.compatMode == "CSS1Compat")
            return { w: d.documentElement.clientWidth,
                h: d.documentElement.clientHeight };
        return { w: d.body.clientWidth, h: d.body.clientHeight };
    }
</script>
</body>
</html>